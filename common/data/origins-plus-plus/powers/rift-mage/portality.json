{
	"type":"origins:multiple",
	"toggle":{
		"type":"origins:resource",
		"min":0,
		"max":1,
		"hud_render":{
			"should_render":false
		}
	},
	"phase_toggle":{
		"type":"origins:toggle",
		"active_by_default":true,
		"key":"key.loadToolbarActivator"
	},
	"phase":{
		"type":"origins:phasing",
		"blacklist":true,
		"render_type":"blindness",
		"view_distance":6,
		"block_condition":{
			"type":"origins:in_tag",
			"tag":"origins:unphasable"
		},
		"phase_down_condition":{
			"type":"origins:and",
			"conditions":[
				{
					"type":"origins:sneaking"
				},
				{
					"type":"origins:on_block"
				}
			]
		},
		"condition":{
			"type":"origins:and",
			"conditions":[
				{
					"type":"origins:resource",
					"resource":"*:*_toggle",
					"compare_to":1,
					"comparison":"=="
				},
				{
					"type":"origins:power_active",
					"power":"*:*_phase_toggle"
				}
			]
		}
	},
	"fly":{
		"type":"origins:creative_flight",
		"condition":{
			"type":"origins:resource",
			"resource":"*:*_toggle",
			"compare_to":1,
			"comparison":"=="
		}
	},
	"night_vision":{
		"type":"origins:night_vision",
		"condition":{
			"type":"origins:resource",
			"resource":"*:*_toggle",
			"compare_to":1,
			"comparison":"=="
		}
	},
	"check_for_beacon":{
		"type":"origins:action_over_time",
		"entity_action":{
			"type":"origins:if_else",
			"condition":{
				"type":"origins:block_in_radius",
				"block_condition":{
					"type":"origins:block",
					"block":"minecraft:beacon"
				},
				"radius":32,
				"shape":"cube",
				"comparison":">=",
				"compare_to":1
			},
			"if_action":{
				"type":"origins:change_resource",
				"resource":"*:*_beacon_present",
				"change":1
			},
			"else_action":{
				"type":"origins:change_resource",
				"resource":"*:*_beacon_present",
				"change":-1
			}
		},
		"interval":20
	},
	"beacon_present":{
		"type":"origins:resource",
		"min":0,
		"max":1,
		"start_value":0,
		"hud_render":{
			"should_render":false
		}
	},
	"glowing_mobs":{
		"type":"origins:action_over_time",
		"entity_action":{
			"type":"origins:if_else",
			"condition":{
				"type":"origins:resource",
				"resource":"*:*_beacon_present",
				"comparison":"==",
				"compare_to":1
			},
			"if_action":{
				"type":"origins:execute_command",
				"command":"effect give @e[distance=1..32] minecraft:glowing 1 1 true"
			},
			"else_action":{
				"type":"origins:execute_command",
				"command":"effect give @e[distance=1..20] minecraft:glowing 1 1 true"
			}
		},
		"interval":20,
		"condition":{
			"type":"origins:resource",
			"resource":"*:*_toggle",
			"compare_to":1,
			"comparison":"=="
		}
	},
	"detect_rift":{
		"type":"origins:action_over_time",
		"entity_action":{
			"type":"origins:if_else",
			"condition":{
				"type":"origins:resource",
				"resource":"*:*_beacon_present",
				"comparison":"==",
				"compare_to":1
			},
			"if_action":{
				"type":"origins:execute_command",
				"command":"execute if entity @e[tag=Portality,distance=..32] run resource set @s origins-plus-plus:rift-mage/portality_toggle 1"
			},
			"else_action":{
				"type":"origins:execute_command",
				"command":"execute if entity @e[tag=Portality,distance=..20] run resource set @s origins-plus-plus:rift-mage/portality_toggle 1"
			}
		},
		"interval":10
	},
	"detect_rift2":{
		"type":"origins:action_over_time",
		"entity_action":{
			"type":"origins:if_else",
			"condition":{
				"type":"origins:resource",
				"resource":"*:*_beacon_present",
				"comparison":"==",
				"compare_to":1
			},
			"if_action":{
				"type":"origins:execute_command",
				"command":"execute unless entity @e[tag=Portality,distance=..32] run resource set @s origins-plus-plus:rift-mage/portality_toggle 0"
			},
			"else_action":{
				"type":"origins:execute_command",
				"command":"execute unless entity @e[tag=Portality,distance=..20] run resource set @s origins-plus-plus:rift-mage/portality_toggle 0"
			}
		},
		"interval":10
	},
	"detect_rift3":{
		"type":"origins:action_over_time",
		"entity_action":{
			"type":"origins:if_else",
			"condition":{
				"type":"origins:resource",
				"resource":"*:*_beacon_present",
				"comparison":"==",
				"compare_to":1
			},
			"if_action":{
				"type":"origins:execute_command",
				"command":"execute if entity @e[tag=Portality,distance=30..32] run title @s actionbar {\"translate\":\"origins-plus-plus.rift-mage.message\",\"color\":\"red\"}"
			},
			"else_action":{
				"type":"origins:execute_command",
				"command":"execute if entity @e[tag=Portality,distance=18..20] run title @s actionbar {\"translate\":\"origins-plus-plus.rift-mage.message\",\"color\":\"red\"}"
			}
		},
		"interval":1
	},
	"detect_rift4":{
		"type":"origins:action_over_time",
		"entity_action":{
			"type":"origins:execute_command",
			"command":"function origins-plus-plus:rift-mage/if_portal_exists"
		},
		"interval":1
	},
	"active":{
		"type":"origins:active_self",
		"key":"key.origins.primary_active",
		"entity_action":{
			"type":"origins:execute_command",
			"command":"function origins-plus-plus:rift-mage/portality"
		},
		"cooldown":3600,
		"hud_render":{
			"sprite_location":"origins:textures/gui/community/huang/resource_bar_01.png",
			"bar_index":1
		}
	},
	"clean_up":{
		"type":"origins:action_on_callback",
		"entity_action_lost":{
			"type":"origins:execute_command",
			"command":"function origins-plus-plus:rift-mage/kill_portal"
		}
	}
}